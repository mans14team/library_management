files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/01_docker_login.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # Docker 로그인 설정
      docker login -u ${DOCKER_USERNAME} -p ${DOCKER_PASSWORD}

container_commands:
  01_retag_image:
    command: |
      # 스테이징 이미지를 현재 이미지로 태그 변경
      if docker images | grep -q "aws_beanstalk/staging-app"; then
        docker tag aws_beanstalk/staging-app aws_beanstalk/current-app
      fi