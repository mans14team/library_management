{
  "AWSEBDockerrunVersion": "1",
  "Image": {
    "Name": "${DOCKER_USERNAME}/spring-app:${IMAGE_TAG}",
    "Update": "true"
  },
  "Ports": [
    {
      "ContainerPort": 8080,
      "HostPort": 80
    }
  ],
  "Volumes": [
    {
      "HostDirectory": "/var/log/app",
      "ContainerDirectory": "/app/logs"
    }
  ],
  "Logging": "/var/log/eb-docker/containers/app",
  "Memory": 1024,
  "Environment": [
    {
      "Name": "SPRING_PROFILES_ACTIVE",
      "Value": "prod"
    },
    {
      "Name": "SERVER_PORT",
      "Value": "8080"
    },
    {
      "Name": "JAVA_OPTS",
      "Value": "-Xms256m -Xmx512m -XX:+UseG1GC -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -Dserver.port=8080"
    }
  ],
  "HealthCheck": {
    "Command": "curl -f http://localhost:8080/actuator/health || exit 1",
    "Interval": 30,
    "Timeout": 5,
    "Retries": 3,
    "StartPeriod": 60
  }
}